{% extends 'ActsCamdramBundle::layout.html.twig' %}

{% set current_navigation_id = 'societies' %}
{% block title %}Society: {{ society.name }}{% endblock %}


{% block option_links %}
    {% if is_granted('EDIT', society) %}
    {% include 'ActsCamdramBundle:Navigation:nav-item.html.twig' with { item: {text: 'Edit "'~society.name~'"', path: path('edit_society', {identifier: society.slug}), icon: 'pencil'}} %}
    {% endif %}

    {% if has_role('ROLE_EDITOR') %}
    {% include 'ActsCamdramBundle:Navigation:nav-item.html.twig' with { item: {text: 'Delete "'~society.name~'"', path: path('remove_society', {identifier: society.slug}), icon: 'eraser'}} %}
    {% endif %}
{% endblock %}

{% block body %}

<div class="row">
    <div class="large-12 columns panel">
         {% if society.image %}
             <div class="row">
                 <div class="three columns"><a href="{{ image_url(society.image, 1024, 768) }}" class="fancybox">{{ render_image(society.image, 205, 200) }}</a></div>
                 <div class="nine columns">
                     <h2>{{ society.name }} <small>- {{ society.shortname }}</small></h2>
                     <p>{{ society.description | camdram_markdown }}</p>
                 </div>
             </div>
         {% else %}
             <h2>{{ society.name }} <small>- {{ society.shortname }}</small></h2>
             <p>{{ society.description | camdram_markdown }}</p>
         {% endif %}
    </div><!-- twelve columns panel -->
</div><!-- row -->
<div class="row">
    <div class="large-{% if society.hasSocialId %}6{% else %}12{% endif %} columns">
        {{ render(controller('ActsCamdramBundle:Society:getVacancies', {identifier: society.slug}), {'strategy': 'esi'}) }}
    </div>
    {% if society.hasSocialId %}
        <div class="large-6 columns">
            <ul class="inline-list right">
                {% if society.facebookId %}<li>
                    <a href="{{ society.getFacebookUrl() }}" target="_blank">
                        <img src="{{ asset('/bundles/actscamdramsecurity/images/facebook.png') }}" alt=""/> Facebook</a>
                    </li>{% endif %}
                {% if society.twitterId %}<li>
                    <a href="{{ society.getTwitterUrl() }}" target="_blank">
                        <img src="{{ asset('/bundles/actscamdramsecurity/images/twitter.png') }}" alt=""/> Twitter</a>
                    </li>{% endif %}
            </ul>
            <h5>News</h5>
            {{ render(controller('ActsCamdramBundle:Society:getNews', {identifier: society.slug}), {'strategy': 'esi'}) }}
        </div>
    {% endif %}
</div>
<div class="row">
    <div class="large-12 columns">
        {{ render(url('get_society_shows', {identifier: society.slug})) }}
    </div>
</div>

{% endblock %}

